# Flag-Guard-System: æ ¡å­¦ç”Ÿå›½æ——æŠ¤å«é˜Ÿç®¡ç†ç³»ç»Ÿ

`Flag-Guard-System` æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„å…¨æ ˆWebåº”ç”¨ï¼Œæ—¨åœ¨ä¸ºæ ¡å­¦ç”Ÿå›½æ——æŠ¤å«é˜Ÿæä¾›ä¸€ä¸ªé«˜æ•ˆã€ç›´è§‚çš„æ´»åŠ¨ä¸æˆå‘˜ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿå†…ç½®äº†ç”¨æˆ·ç®¡ç†ã€è®­ç»ƒæ—¥ç¨‹ã€æ´»åŠ¨ç»„ç»‡ã€ç§¯åˆ†æ¿€åŠ±ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆæ„å»ºï¼Œå‰ç«¯åŸºäº Vue.jsï¼Œåç«¯åˆ™ç”± Flask é©±åŠ¨ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ‘¤ ç”¨æˆ·ç®¡ç†**: åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆæˆå‘˜ã€ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜ï¼‰ï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†å’Œç”¨æˆ·åˆ é™¤ã€‚
- **ğŸ‹ï¸ è®­ç»ƒç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘å’Œç®¡ç†è®­ç»ƒæ—¥ç¨‹ï¼Œæ”¯æŒè®­ç»ƒæŠ¥åã€å‡ºå‹¤è®°å½•å’Œè®­ç»ƒå®¡æ ¸åŠŸèƒ½ã€‚
- **ğŸ‰ æ´»åŠ¨ç®¡ç†**: ç»„ç»‡å›¢é˜Ÿæ´»åŠ¨ï¼Œæ”¯æŒæ´»åŠ¨åˆ›å»ºã€æŠ¥åç®¡ç†ï¼Œå¹¶å¯å°†æ´»åŠ¨ä¸ç‰¹å®šè®­ç»ƒé¡¹ç›®å…³è”ã€‚
- **â­ ç§¯åˆ†ç³»ç»Ÿ**: ä¸ºå‚ä¸è®­ç»ƒã€å‡é™æ——ç­‰æ´»åŠ¨çš„ç”¨æˆ·æˆäºˆç§¯åˆ†ï¼Œæä¾›ç§¯åˆ†è®°å½•æŸ¥è¯¢å’Œæ‰‹åŠ¨ç§¯åˆ†è°ƒæ•´åŠŸèƒ½ã€‚
- **ğŸ å‡é™æ——ç®¡ç†**: è®°å½•å’Œå®¡æ ¸å‡é™æ——æ´»åŠ¨ï¼Œè¿½è¸ªæˆå‘˜å‚ä¸æƒ…å†µã€‚
- **ğŸ“Š ç®¡ç†ä»ªè¡¨ç›˜**: ä¸ºç®¡ç†å‘˜æä¾›ç³»ç»Ÿæ•°æ®æ¦‚è§ˆï¼ŒåŒ…æ‹¬ç”¨æˆ·ç»Ÿè®¡ã€æ´»åŠ¨æ¦‚å†µã€è®­ç»ƒæ•°æ®ç­‰ã€‚
- **ğŸ“ æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒå›¾ç‰‡æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†åŠŸèƒ½ã€‚
- **ğŸ”Œ RESTful API**: æä¾›å®Œæ•´çš„APIæ¥å£ï¼Œæ”¯æŒSwaggeræ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

|              | æŠ€æœ¯                                                                  |
| ------------ | --------------------------------------------------------------------- |
| **åç«¯**     | Python 3, Flask, PyMySQL, Flask-JWT-Extended, Flasgger (Swagger)   |
| **å‰ç«¯**     | Vue 3 (Composition API), TypeScript, Element Plus, Pinia, Vue Router, Axios |
| **æ•°æ®åº“**   | MySQL                                                                 |
| **å¼€å‘å·¥å…·** | Node.js, npm, pip, virtualenv, Black, Flake8, pytest               |

## ğŸš€ æœ¬åœ°éƒ¨ç½²æŒ‡å—

è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤åœ¨æ‚¨çš„æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œæ­¤é¡¹ç›®ã€‚

### å‡†å¤‡å·¥ä½œ

- ç¡®ä¿æ‚¨çš„ç”µè„‘å·²å®‰è£… [Node.js](https://nodejs.org/) (v16+ ç‰ˆæœ¬)
- ç¡®ä¿æ‚¨çš„ç”µè„‘å·²å®‰è£… [Python](https://www.python.org/) (v3.9+ ç‰ˆæœ¬)
- ç¡®ä¿æ‚¨çš„ç”µè„‘å·²å®‰è£…å¹¶è¿è¡Œ [MySQL](https://www.mysql.com/) æœåŠ¡

### åç«¯æœåŠ¡å¯åŠ¨

```bash
# 1. è¿›å…¥åç«¯é¡¹ç›®ç›®å½•
cd backend

# 2. åˆ›å»ºå¹¶æ¿€æ´» Python è™šæ‹Ÿç¯å¢ƒ
# Windows
python -m venv venv
venv\Scripts\activate

# macOS / Linux
# python3 -m venv venv
# source venv/bin/activate

# 3. å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®æ•°æ®åº“è¿æ¥
#    - é¦–å…ˆï¼Œåœ¨æ‚¨çš„ MySQL ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ (ä¾‹å¦‚ `system`)ã€‚
#    - ç„¶åï¼Œæ‰“å¼€ `backend/config.py` æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼š
#      MYSQL_HOSTã€MYSQL_USERã€MYSQL_PASSWORDã€MYSQL_DATABASE ç­‰å‚æ•°
#      æˆ–è€…åˆ›å»º `.env` æ–‡ä»¶è®¾ç½®ç¯å¢ƒå˜é‡

# 5. åˆå§‹åŒ–æ•°æ®åº“å¹¶åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·
#    è¯·å°† <...> éƒ¨åˆ†æ›¿æ¢ä¸ºæ‚¨æƒ³è¦çš„ä¿¡æ¯
flask --app app.py drop-db --yes
flask --app app.py init-db
flask --app app.py create-user <ç”¨æˆ·å> <å¯†ç > <å§“å> <å­¦å·(å¦‚:PB23000000)> --role superadmin

# 6. å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
python app.py
```

### å‰ç«¯æœåŠ¡å¯åŠ¨

```bash
# 1. æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯é¡¹ç›®ç›®å½•
cd frontend

# 2. å®‰è£…æ‰€æœ‰ä¾èµ–
npm install

# 3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run serve
```

å½“æ‰€æœ‰æ­¥éª¤å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—® `http://localhost:8080` æ¥æŸ¥çœ‹è¿è¡Œä¸­çš„é¡¹ç›®ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
system/
â”œâ”€â”€ backend/            # Flask åç«¯æºä»£ç 
â”‚   â”œâ”€â”€ app.py          # åº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ cli.py          # è‡ªå®šä¹‰ Flask å‘½ä»¤
â”‚   â”œâ”€â”€ config.py       # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ extensions.py   # æ‰©å±•åˆå§‹åŒ–
â”‚   â”œâ”€â”€ db_connection.py # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ models_pymysql.py # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ sql/            # SQLç›¸å…³æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ queries.py   # SQLæŸ¥è¯¢è¯­å¥
â”‚   â”‚   â””â”€â”€ schema.sql   # æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±è“å›¾
â”‚   â”‚   â”œâ”€â”€ auth.py      # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ dashboard.py # ä»ªè¡¨ç›˜è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ events.py    # æ´»åŠ¨ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ file.py      # æ–‡ä»¶ä¸Šä¼ è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ flag.py      # å‡é™æ——ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ points.py    # ç§¯åˆ†ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ trainings.py # è®­ç»ƒç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ users.py     # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ users_delete.py # ç”¨æˆ·åˆ é™¤è·¯ç”±
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ auth.py      # è®¤è¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ export.py    # æ•°æ®å¯¼å‡ºå·¥å…·
â”‚   â”‚   â”œâ”€â”€ pagination.py # åˆ†é¡µå·¥å…·
â”‚   â”‚   â”œâ”€â”€ route_utils.py # è·¯ç”±å·¥å…·
â”‚   â”‚   â”œâ”€â”€ time_utils.py # æ—¶é—´å·¥å…·
â”‚   â”‚   â””â”€â”€ upload.py    # æ–‡ä»¶ä¸Šä¼ å·¥å…·
â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ logging.py   # æ—¥å¿—ä¸­é—´ä»¶
â”‚   â””â”€â”€ uploads/        # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ frontend/           # Vue.js å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ECharts.vue # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index.vue # ä¸»å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ router/     # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ stores/     # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ event.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ training.ts
â”‚   â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”‚   â”œâ”€â”€ types/      # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/      # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ formatDate.ts
â”‚   â”‚   â”‚   â””â”€â”€ request.ts
â”‚   â”‚   â”œâ”€â”€ views/      # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue     # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ EventManage.vue   # æ´»åŠ¨ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Events.vue        # æ´»åŠ¨åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ FlagRecords.vue   # å‡é™æ——è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ FlagReview.vue    # å‡é™æ——å®¡æ ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue         # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Points.vue        # ç§¯åˆ†è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ PointsManage.vue  # ç§¯åˆ†ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.vue       # ä¸ªäººèµ„æ–™
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.vue      # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainingAttendance.vue # è®­ç»ƒå‡ºå‹¤
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainingReview.vue # è®­ç»ƒå®¡æ ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Trainings.vue     # è®­ç»ƒåˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ Users.vue         # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ styles/     # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md           # æœ¬æ–‡æ¡£
```

## ğŸ”§ CLI å·¥å…·

ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·ç”¨äºç®¡ç†å’Œç»´æŠ¤ï¼š

```bash
# æ•°æ®åº“ç®¡ç†
flask --app app.py init-db              # åˆå§‹åŒ–æ•°æ®åº“
flask --app app.py drop-db --yes        # åˆ é™¤æ•°æ®åº“

# ç”¨æˆ·ç®¡ç†
flask --app app.py create-user <ç”¨æˆ·å> <å¯†ç > <å§“å> <å­¦å·> --role <è§’è‰²>
flask --app app.py delete-user <ç”¨æˆ·å>
flask --app app.py list-users            # åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·
flask --app app.py reset-password <ç”¨æˆ·å> <æ–°å¯†ç >

# ç³»ç»Ÿç»´æŠ¤
flask --app app.py cleanup-records --days <å¤©æ•°>  # æ¸…ç†å†å²è®°å½•
flask --app app.py backup-db <å¤‡ä»½æ–‡ä»¶å>          # å¤‡ä»½æ•°æ®åº“
flask --app app.py check-system                   # ç³»ç»Ÿæ£€æŸ¥
flask --app app.py export-data <è¾“å‡ºæ–‡ä»¶>         # å¯¼å‡ºæ•°æ®
```

## ğŸ“Š API æ–‡æ¡£

åç«¯é›†æˆäº† Swagger æ–‡æ¡£ï¼Œå¯åŠ¨æœåŠ¡å™¨åå¯è®¿é—®ï¼š
- API æ–‡æ¡£ï¼š`http://localhost:5000/apidocs`
- API è§„èŒƒï¼š`http://localhost:5000/apispec.json`

## ğŸš€ å¼€å‘ç‰¹æ€§

### æ•°æ®åº“æ¶æ„
- é‡‡ç”¨ PyMySQL ç›´æ¥è¿æ¥ MySQL æ•°æ®åº“
- æ”¯æŒæ•°æ®åº“è¿æ¥æ± å’Œäº‹åŠ¡ç®¡ç†
- å®Œæ•´çš„æ•°æ®åº“ Schema å®šä¹‰ (`sql/schema.sql`)
- SQL æŸ¥è¯¢è¯­å¥æ¨¡å—åŒ–ç®¡ç† (`sql/queries.py`)

### å®‰å…¨ç‰¹æ€§
- JWT Token è®¤è¯æœºåˆ¶
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ (RBAC)
- CORS è·¨åŸŸé…ç½®
- è¯·æ±‚å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†

### å¼€å‘å·¥å…·
- ä»£ç æ ¼å¼åŒ–ï¼šBlack
- ä»£ç æ£€æŸ¥ï¼šFlake8  
- æµ‹è¯•æ¡†æ¶ï¼špytest
- API æ–‡æ¡£ï¼šSwagger/Flasgger

### æ—¥å¿—ç³»ç»Ÿ
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
- è¯·æ±‚/å“åº”æ—¥å¿—è¿½è¸ª
- é”™è¯¯æ—¥å¿—å’Œå¼‚å¸¸å¤„ç†

## è®¸å¯è¯

MIT 
